# è„šæ‰‹æ¶åŸç†å’ŒåŸºæœ¬æ­å»º

## ä»€ä¹ˆæ˜¯è„šæ‰‹æ¶
è„šæ‰‹æ¶æœ¬è´¨æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„å®¢æˆ·ç«¯ï¼Œå®ƒé€šè¿‡å‘½ä»¤æ‰§è¡Œï¼Œå¦‚ï¼š
```js
vue create vue-test-app
```
ä¸Šé¢å‘½ä»¤ç”±ä¸‰éƒ¨åˆ†ç»„æˆ
- ä¸»å‘½ä»¤ï¼šVue
- command:create
- command çš„ parmï¼švue-test-app

æ‰§è¡Œæ­¤å‘½ä»¤åï¼Œå°±ä¼šåœ¨å¯¹åº”ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå«åš vue-test-app çš„é¡¹ç›®ï¼Œå¹¶è‡ªåŠ¨æ‰§è¡Œ **npm install** æŒ‰ç…§å¯¹åº”çš„ä¾èµ–ï¼Œé€šå¸¸å¯ä»¥è¾“å…¥ä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥çœ‹åˆ° **vue create** æ”¯æŒçš„æ‰€æœ‰ options 

```js
vue create --help
```

## ä¸ºä»€ä¹ˆè¦ç ”å‘è„šæ‰‹æ¶?

å¼€å‘è„šæ‰‹æ¶çš„æ ¸å¿ƒç›®æ ‡å°±æ˜¯ï¼š**æå‡å‰ç«¯ç ”å‘æ•ˆç‡**

åœ¨å¤§çš„å¼€å‘å›¢é˜Ÿä¸­ï¼Œæå‡ç ”å‘æ•ˆç‡æ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œå‡å°‘é‡å¤æ“ä½œåŠ³åŠ¨ï¼Œç»Ÿä¸€ä»£ç é£æ ¼å’Œç»“æ„ã€‚æˆ‘ä»¬é€šè¿‡è„šæ‰‹æ¶è®²ç ”å‘è¿‡ç¨‹ï¼š
- **è‡ªåŠ¨åŒ–ï¼šé¡¹ç›®é‡å¤ä»£ç æ‹·è´/gitæ“ä½œ/å‘å¸ƒä¸Šçº¿æ“ä½œ**
- **æ ‡å‡†åŒ–ï¼šé¡¹ç›®åˆ›å»º/git flow/å‘å¸ƒæµç¨‹/å›æ»šæ“ä½œ**
- **æ•°æ®åŒ–ï¼šç ”å‘è¿‡ç¨‹ç³»ç»ŸåŒ–ã€æ•°æ®åŒ–ã€ä½¿å¾—ç ”å‘è¿‡ç¨‹å¯é‡åŒ–**

## è„šæ‰‹æ¶çš„æ‰§è¡ŒåŸç†

![](http://imooc-lego-homework.oss-cn-hangzhou.aliyuncs.com/docs/pages/%E5%87%B9%E5%87%B8%E6%9B%BC/images/cli.png)

è„šæ‰‹æ¶çš„æ‰§è¡ŒåŸç†å¦‚ä¸‹ï¼š
* **åœ¨ç»ˆç«¯è¾“å…¥ `vue create vue-test-app`**
* **ç»ˆç«¯è§£æå‡º `vue` å‘½ä»¤**
* **ç»ˆç«¯åœ¨ç¯å¢ƒå˜é‡ä¸­æ‰¾åˆ° `vue` å‘½ä»¤**
* **ç»ˆç«¯æ ¹æ® `vue` å‘½ä»¤é“¾æ¥åˆ°å®é™…æ–‡ä»¶ `vue.js`**
* **ç»ˆç«¯åˆ©ç”¨ `node` æ‰§è¡Œ `vue.js`**
* **`vue.js` è§£æ command/options**
* **`vue.js` æ‰§è¡Œ command**
* **æ‰§è¡Œå®Œæ¯•é€€å‡ºæ‰§è¡Œ**

## ç–‘é—®ğŸ¤”ï¸

- **ä¸ºä»€ä¹ˆå…¨å±€å®‰è£…äº† `@vue/cli` åä¼šæ·»åŠ çš„å‘½ä»¤ä¸º `vue`?**

```js
npm install -g @vue/cli
```
- **å…¨å±€å®‰è£… `@vue/cli` æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ**
- **æ‰§è¡Œ `vue` å‘½ä»¤æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆ `vue` æŒ‡å‘ä¸€ä¸ª `js` æ–‡ä»¶ï¼Œæˆ‘ä»¬å´å¯ä»¥é€šè¿‡ `vue` å‘½ä»¤å»æ‰§è¡Œ?**

å¸¦ç€é—®é¢˜æˆ‘ä»¬æ¥ä¸€ä¸€åˆ¨æ!

è¿™é‡Œä»¥æˆ‘æœ¬åœ° `create-react-app` è„šæ‰‹æ¶ä¸ºæ¼”ç¤ºï¼Œåœ¨æ‰§è¡Œå‘½ä»¤æ—¶ï¼Œç»ˆç«¯é¦–å…ˆä¼šæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡ŒæŸ¥æ‰¾ï¼š
```js
which create-react-app
```
å¦‚å›¾ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ç¯å¢ƒå˜é‡ `/usr/local/bin` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªäº†å«åš `create-react-app` çš„è½¯é“¾æ¥

![](http://imooc-lego-homework.oss-cn-hangzhou.aliyuncs.com/docs/pages/%E5%87%B9%E5%87%B8%E6%9B%BC/images/create-react-app.png)

OKï¼Œç°åœ¨è®©æˆ‘ä»¬è¿›å…¥åˆ°å¯¹åº”çš„ç›®å½•ï¼Œçœ‹çœ‹

![](http://imooc-lego-homework.oss-cn-hangzhou.aliyuncs.com/docs/pages/%E5%87%B9%E5%87%B8%E6%9B%BC/images/create-react-app.png)

åœ¨å¯¹åº”ç›®å½•ä¸‹æˆ‘ä»¬çœ‹åˆ°äº† `create-react-app` é¡¹ç›®çš„ç›®å½•ç»“æ„ï¼ŒæŸ¥çœ‹ `pack.json` çš„ `bin` å±æ€§ï¼Œå‘ç°å¦‚ä¸‹

```js
  "bin": {
    "create-react-app": "./index.js"
  },
```

åŒæ · `@vue/cli` ä¹Ÿæ˜¯è¯¥åŸç†ï¼Œåˆ°æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥å›åˆ°å‰é¢ä¸¤ä¸ªé—®é¢˜ã€‚

åœ¨**å…¨å±€å®‰è£…** `@vue/cli` ã€`create-react-app` æ—¶ï¼Œé¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼Œç„¶åæŒ‡å‘å®ƒçœŸæ˜¯æ‰€åœ¨çš„é¡¹ç›®ç›®å½•ï¼Œé€šè¿‡ä¸Šé¢çš„å›¾å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡å…¨å±€å®‰è£…ä¼šè¢«æ”¾åœ¨ `/yarn/global/node_modules/.bin/` ç›®å½•ä¸‹

é€šè¿‡é…ç½®æ–‡ä»¶ `pack.json` çš„ **bin** æ–‡ä»¶ï¼Œè®¾ç½®å‘½ä»¤çš„åå­—ï¼Œå¦‚ **vue**ã€**create-react-app**ï¼Œcli å°±ä¼šå»æ‰§è¡Œå¯¹åº”çš„æ–‡ä»¶ã€‚æˆ‘ä»¬æ‰“å¼€ `create-react-app` å¯¹åº”çš„ `./index.js` çœ‹çœ‹ï¼Œåœ¨å¤´éƒ¨æˆ‘ä»¬å‘ç°è¿™ä¹ˆä¸€è¡Œä»£ç 

```js
#!/usr/bin/env node
```

è¿™æ®µä»£ç çš„ä½œç”¨å°±æ˜¯åœ¨**ç¯å¢ƒå˜é‡ä¸­æŸ¥æ‰¾ `node`ï¼Œç„¶åç”¨ `node` å»æ‰§è¡Œ**ï¼Œåˆ°æ­¤åŸºæœ¬å›åˆ°äº†ä¸Šé¢ä¸‰ä¸ªé—®é¢˜ï¼Œä¸‹é¢æ¥è¿›é˜¶ä¸€ä¸‹è„šæ‰‹æ¶åŸç†

## è„šæ‰‹æ¶åŸç†è¿›é˜¶

- ä¸ºä»€ä¹ˆè¯´è„šæ‰‹æ¶çš„æœ¬è´¨æ“ä½œç³»ç»Ÿçš„å®¢æˆ·ç«¯?å®ƒå’Œæˆ‘ä»¬åœ¨PCä¸Šå®‰è£…çš„åº”ç”¨/è½¯ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
- å¦‚ä½•ä¸º `Node` è„šæ‰‹æ¶åˆ›å»ºåˆ«åï¼Ÿ

æˆ‘ä»¬çŸ¥é“ç¼–å†™çš„è„šæ‰‹æ¶`JS` æ–‡ä»¶ï¼Œå¿…é¡»åœ¨ `Node` ç¯å¢ƒä¸­è¿è¡Œï¼Œæˆ‘ä»¬æ‰¾åˆ°å®‰è£… Node çš„ç›®å½•å‘ç°ï¼ŒNode æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œåªä¸è¿‡æ²¡æœ‰ `GUI` å¯è§†åŒ–çš„æ“ä½œé¡µé¢ï¼Œå®ƒå’Œæˆ‘ä»¬åœ¨PCä¸Šå®‰è£…çš„åº”ç”¨æœ¬è´¨æ²¡æœ‰ä»»ä½•åŒºåˆ«


å¯ä»¥é€šè¿‡åˆ›å»º**è½¯é“¾æ¥**çš„æ–¹å¼ç»™è„šæ‰‹æ¶åˆ›å»ºåˆ«å

```js
ln -s ./create-react-app create-react-app2
```
æ–°èµ·çš„åå­—å«åš `create-react-app2` ä¼šæŒ‡å‘ `create-react-app`ï¼Œ`create-react-app` ä¼šæŒ‡å‘çœŸå®çš„åœ°æ–¹

ç”¨ä¸€å¼ å›¾æ€»ç»“è„šæ‰‹æ¶æ‰§è¡Œçš„å…¨è¿‡ç¨‹.
![](http://imooc-lego-homework.oss-cn-hangzhou.aliyuncs.com/docs/pages/%E5%87%B9%E5%87%B8%E6%9B%BC/images/%E8%84%9A%E6%89%8B%E6%9E%B6%E8%BF%87%E7%A8%8B.png)

## è„šæ‰‹æ¶å¼€å‘æµç¨‹

åœ¨ä¹‹å‰æ–‡ç«  [ä»é›¶åˆ›å»ºè‡ªå·±çš„è„šæ‰‹æ¶](https://lilixikun.github.io/blog/engineering/%E6%89%93%E9%80%A0%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E8%84%9A%E6%89%8B%E6%9E%B6.html) ä¸­å®ç°äº†ä¸€ä¸ªè„šæ‰‹æ¶çš„ç®€å•æ­å»ºå’Œå‘å¸ƒï¼Œé‚£ä¹ˆæœ‰é‚£äº›éš¾ç‚¹æ²¡æœ‰è§£å†³å‘¢ï¼Ÿ

## è„šæ‰‹æ¶å¼€å‘éš¾ç‚¹è§£æ

- **åˆ†åŒ…ï¼šå°†å¤æ‚çš„ç³»ç»Ÿåˆ†å¼€æˆè‹¥å¹²ä¸ªæ¨¡å—**

- **æ³¨å†Œå‘½ä»¤**
```js
vue add
vue create
```
- **å‚æ•°è§£æ**
    - optinoså…¨ç§°ï¼š--versionã€--help
    - optionsç®€å†™ï¼š-Vã€-h
    - å¸¦paramsçš„optinosï¼š--path /Users/xikun/Aotu

ç¤ºä¾‹ä»£ç :
```js
vue commadn [options] <params>
```

- **å¸®åŠ©æ–‡æ¡£**
    - globale help

ä»¥ `create-react-app` ç¤ºä¾‹ï¼š
```js
sage: create-react-app <project-directory> [options]

Options:
  -V, --version                            output the version number
  --verbose                                print additional logs
  --info                                   print environment debug info
  --scripts-version <alternative-package>  use a non-standard version of react-scripts
  --template <path-to-template>            specify a template for the created project
  --use-npm
  --use-pnp
  -h, --help                               output usage information
    Only <project-directory> is required.

    A custom --scripts-version can be one of:
      - a specific npm version: 0.8.2
      - a specific npm tag: @next
      - a custom fork published on npm: my-react-scripts
      - a local path relative to the current working directory: file:../my-react-scripts
      - a .tgz archive: https://mysite.com/my-react-scripts-0.8.2.tgz
      - a .tar.gz archive: https://mysite.com/my-react-scripts-0.8.2.tar.gz
    It is not needed unless you specifically want to use a fork.

    A custom --template can be one of:
      - a custom template published on npm: cra-template-typescript
      - a local path relative to the current working directory: file:../my-custom-template
      - a .tgz archive: https://mysite.com/my-custom-template-0.8.2.tgz
      - a .tar.gz archive: https://mysite.com/my-custom-template-0.8.2.tar.gz

    If you have any problems, do not hesitate to file an issue:
      https://github.com/facebook/create-react-app/issues/new

```

è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š
- **å‘½ä»¤è¡Œäº¤äº’**
- **æ—¥å¿—æ‰“å°**
- **å‘½ä»¤è¡Œæ–‡å­—é¢œè‰²**
- **ç½‘ç»œé€šä¿¡ï¼šHTTP/WebSocket**
- **æ–‡ä»¶å¤„ç†**

ç­‰ç­‰ã€‚ã€‚ã€‚

## åŸç”Ÿè„šæ‰‹æ¶å¼€å‘ç—›ç‚¹åˆ†æ
- ç—›ç‚¹ä¸€ï¼šé‡å¤æ“ä½œ

    - å¤šPageageæœ¬åœ°link
    - å¤šPageageä¾èµ–å®‰è£…
    - å¤šPageageå•å…ƒæµ‹è¯•
    - å¤šPageageä»£ç ææµ‹
    - å¤šPageageä»£ç å‘å¸ƒ
- ç—›ç‚¹äºŒï¼šç‰ˆæœ¬ä¸€è‡´æ€§
    - å‘å¸ƒæ—¶ç‰ˆæœ¬ä¸€è‡´æ€§
    - å‘å¸ƒåç›¸äº’ä¾èµ–ç‰ˆæœ¬å‡çº§

> Pageage è¶Šå¤šï¼Œç®¡ç†å¤æ‚åº¦è¶Šé«˜

## è„šæ‰‹æ¶æœ¬åœ°linkæ ‡å‡†æµç¨‹

é“¾æ¥æœ¬åœ°è„šæ‰‹æ¶
```js
cd your-cli-dir
npm link
```

é“¾æ¥æœ¬åœ°åº“æ–‡ä»¶

```js
cd your-lib-dir
npm link
cd your-cli-dir
npm link your-lib
```

å–æ¶ˆé“¾æ¥æœ¬åœ°åº“æ–‡ä»¶

```js
cd your-lib-dir
npm unlink
cd your-cli-dir
# linkå­˜åœ¨
npm unlink your-lib
# linkä¸å­˜åœ¨
rm -rf node_modules
npm install -S your-lib
```

ç†è§£ `npm link`

- `npm link your-lib`ï¼šå°†å½“å‰é¡¹ç›®ä¸­çš„ `node_modules` ä¸‹æŒ‡å®šçš„åº“æ–‡ä»¶é“¾æ¥åˆ° `node` å…¨å±€ `node_modules` ä¸‹çš„åº“æ–‡ä»¶
- `npm link`ï¼šå°†é¡¹ç›®å½“å‰é“¾æ¥åˆ° `node` å…¨å±€ `node_modules` ä¸­ä½œä¸ºä¸€ä¸ªåº“æ–‡ä»¶ï¼Œå¹¶è§£æ  `bin` é…ç½®åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶

ç†è§£ `npm unlink`

- `npm unlink`ï¼šå°†å½“å‰é¡¹ç›®ä» `node` å…¨å±€ `node_modules` ç§»é™¤
- `npm unlink your-lib`ï¼šå°†å½“å‰é¡¹ç›®çš„åº“æ–‡ä»¶ä¾èµ–ç§»é™¤

## Lerna ç®€ä»‹
[Learn](https://github.com/lerna/lerna) æ˜¯ä¸€ä¸ªä¼˜åŒ–åŸºäº git + npm çš„å¤š pageage é¡¹ç›®ç®¡ç†çš„å·¥å…·ï¼Œåƒ [bable](https://github.com/babel/babel)ã€[vue-cli](https://github.com/vuejs/vue-cli)ã€[create-react-app](https://github.com/facebook/create-react-app) éƒ½ä½¿ç”¨ `Lerna` è¿›è¡Œç®¡ç†

### Lerna å¼€å‘è„šæ‰‹æ¶æµç¨‹

![](http://imooc-lego-homework.oss-cn-hangzhou.aliyuncs.com/docs/pages/%E5%87%B9%E5%87%B8%E6%9B%BC/images/Learn%E6%B5%81%E7%A8%8B.png)

### åŸºäºLernaåˆ›å»ºè„šæ‰‹æ¶

å…¨å±€å®‰è£… `Lerna`

```js
npm install -g lerna
```

åœ¨é¡¹ç›®ç›®å½•æ‰§è¡Œ lerna åˆå§‹åŒ–å‘½ä»¤

```js
lerna init
```
å‘ç°ä¼šç”Ÿæˆä¸€ä¸ª `lerna.json` æ–‡ä»¶å’Œ `packages` ç›®å½•ï¼Œå¹¶ä¸”ä¸ºæˆ‘ä»¬åˆå§‹åŒ–äº† `git` ä»“åº“

**ä½¿ç”¨ `Lerna` åˆ›å»ºä¸€ä¸ª package**

```js
lerna create core
lerna create utils
```
> åœ¨è¾“å…¥ package çš„ nameï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ npm åŒ…ç»„ç»‡ç®¡ç†é»˜è®¤ï¼Œå¦‚ @aotu-cli/coreã€@aotu-cli/utils

å¦‚ä¸‹å›¾åœ¨ `npm` ä¸Šæ³¨å†Œä¸€ä¸ªå‘½ä»¤ `aotu-cli` çš„ç»„ç»‡ï¼Œè¿™æ ·æˆ‘ä»¬æ‰€æœ‰çš„åŒ…æ–‡ä»¶éƒ½åœ¨å®ƒä¸‹é¢

![](http://imooc-lego-homework.oss-cn-hangzhou.aliyuncs.com/docs/pages/%E5%87%B9%E5%87%B8%E6%9B%BC/images/npm-Organizations.png)

**ä½¿ç”¨ `Lerna` æ·»åŠ ä¾èµ–**

```js
// ç»™æ‰€æœ‰packageä¾èµ–ä¾èµ–
lerna add loadash
// ç»™æŒ‡å®špackageä¾èµ–ä¾èµ–
lerna add loadash packages/core
```

**ä½¿ç”¨ `Lerna` ç§»é™¤æ‰€æœ‰ä¾èµ–**

```js
lerna add loadash
```
> **åªä¼šåˆ é™¤ `node_modules`ï¼Œä¸ä¼šåˆ é™¤ `package.json` ä¸­çš„ä¾èµ–**

**ä½¿ç”¨ `Lerna` æ‰§è¡Œæ‰€æœ‰å‘½ä»¤**

```js
lerna run test
```

**ä½¿ç”¨ `Lerna` è¿›è¡Œæ‰¹é‡å‘å¸ƒ**

```js
lerna publish
```

![](http://imooc-lego-homework.oss-cn-hangzhou.aliyuncs.com/docs/pages/%E5%87%B9%E5%87%B8%E6%9B%BC/images/lerna-vesion.png)

åˆæ¬¡æ‰§è¡Œä¼šæŠ¥é”™ï¼Œæç¤ºå‘Šè¯‰æˆ‘ä»¬ æ‰§è¡Œ `git commit` 

okï¼Œé¦–å…ˆåœ¨ github ä¸Šåˆ›å»ºå·¥ç¨‹å¹¶é“¾æ¥åˆ°æœ¬åœ°è¿›è¡Œæ¨é€ï¼Œå†æ¬¡æ‰§è¡Œ `lerna publish`

å‘Šè¯‰æˆ‘ä»¬éœ€è¦å…ˆè¿›è¡Œ `npm` ç™»é™†ï¼Œæˆ‘ä»¬æ‰§è¡Œ `npm login` è¿›è¡Œç™»é™†ï¼Œè¾“å…¥è´¦æˆ·å¯†ç ï¼Œå‘ç°åˆå‡ºç°æ–°çš„æŠ¥é”™

![](http://imooc-lego-homework.oss-cn-hangzhou.aliyuncs.com/docs/pages/%E5%87%B9%E5%87%B8%E6%9B%BC/images/npm-registry.png)

è¿™ä¸ªé”™è¯¯æ˜¯ `npm` è¦æ±‚åœ¨å‘å¸ƒçš„æ—¶å€™è¦æ±‚è®¾ç½®ç¯å¢ƒä¸ºåŸåœ°å€ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤
```js
npm config set registry http://registry.npmjs.org 
```

å†æ¬¡æ‰§è¡Œ `lerna publish`ï¼Œåˆå‘ç°æŠ¥é”™

![](http://imooc-lego-homework.oss-cn-hangzhou.aliyuncs.com/docs/pages/%E5%87%B9%E5%87%B8%E6%9B%BC/images/lerna-public.png)

è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸º `Lerna` çš„é¡¹ç›®é»˜è®¤éƒ½æ˜¯ç§æœ‰é¡¹ç›®ï¼Œåœ¨æ¯ä¸ª packages çš„ `package.json` é‡Œé¢æ·»åŠ é…ç½®
```json
  "publishConfig": {
    "access": "public"
  }
```

å†æ¬¡æ‰§è¡Œ `lerna publish`

![](http://imooc-lego-homework.oss-cn-hangzhou.aliyuncs.com/docs/pages/%E5%87%B9%E5%87%B8%E6%9B%BC/images/lerna-success.png)

å¦‚å›¾å‘å¸ƒæˆåŠŸï¼Œåœ¨ `npm` è¿›è¡Œæœç´¢ï¼Œæ‰¾åˆ°äº†æˆ‘ä»¬åˆšæ‰å‘å¸ƒçš„ä¸¤ä¸ªåŒ…
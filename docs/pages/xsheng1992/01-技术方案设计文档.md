# 整体架构设计 V1.0

## 需求

需求文档

## 范围

本次产品涉及四个方面：

- B端编辑器
   - B端编辑器前端
   - B端编辑器后端

- H5端应用
   - SSR渲染（性能高）

- 后台管理
   - 后台管理前端
   - 后台管理后端

- 统计服务

## 模块设计

![模块图](./images/01-模块图.png)

- B端编辑器：创作者 - 作品的创建、发布及编辑，前后端分离
- H5端应用：普通用户 - 查看作品、分享作品，SSR
- 后台应用：管理员 - 作品管理，紧急操作，前后端分离
- 组件库：同时用于B端及服务端，相同渲染方式呈现作品
- 统计服务：统计pv、uv，生成报告

## 作品的数据结构

编辑器的组件以及H5应用展示的作品数据使用vnode数据格式进行存储。（标准化）

初步定义数据格式如下：

```
{
   work: {
      title: '作品标题',
      settings: {}, // 为作品后续配置项预留
      attrs: {}, // 为作品后续页面设置选项预留
      components: [ // 数组形式便于排序
         {
            id: '111',
            tag: 'text',
            name: '文本1',
            attrs: { fontSize: 20 }, // 节点属性
            children: ['文本1']
         },
         {
            id: '222',
            tag: 'image',
            name: '图片1',
            attrs: { src: 'xxx.png', width: 100 }, // 节点属性
            children: [null]
         }
      ]
   },
   activeComponentId: '' // 当前选中的组件id
}
```

## 扩展性保证

- 组件的扩展性
- 数据结构的扩展（提供更多配置项）
- 编辑器功能扩展（对组件进行隐藏、锁定）
- 页面配置扩展（如多语言）

## 开发提效

- 开发脚手架提高开发效率
- 使用组件库避免重复实现组件显示逻辑
